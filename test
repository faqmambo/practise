from pprint import pprint
from requests_html import HTMLSession
import csv

def get_dom():
    session = HTMLSession()
    result_meta = []
    fieldnames = [['URL', 'Title']]
    while True:
        domain = input("Введите ваше ключевое слово или 'exit' чтобы выйти: ")
        if domain == 'exit':
            break
        response = session.get(domain)    
        links = get_meta(response, '//a/@href')
        title = get_meta(response, '/html/head/title')
        result_meta.append([domain, title])
        for url in links:
            response = session.get(url)    
            links = get_meta(response, '//a/@href')
            title = get_meta(response, '/html/head/title')
            result_meta.append([url, title])   
    return


def  get_all_url()

def csv_writer(path, fieldnames, data):
    with open(path, "w", newline='') as out_file:
        writer = csv.DictWriter(out_file, delimiter=';', fieldnames=fieldnames)
        writer.writeheader()
        for row in data:
            writer.writerow(row)


def get_meta(response, xpath):
    result = response.html.xpath('//a/@href')
    return result





if __name__ == '__main__':
    get_dom()
    
